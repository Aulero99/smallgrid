%skeleton-base{
    background: 
    linear-gradient(0.25turn, transparent, #fff, transparent), 
    linear-gradient(#eee, #eee);
    background-repeat: no-repeat;
    background-size: 100%; 
    background-position: calc(-1 * #{$root-vw100}) 0, 0 0; 
}

.skeleton:not(.row), *[skeleton]:not(.row){
    &:empty, &:has(img[data-src]), *:not(br):empty, *:not(hr):empty, *:not(input):empty, *:not(img):empty{
        @extend %skeleton-base;
    }
}

.row[skeleton] > *, .skeleton.row .col > *{
    &:empty{
        @extend %skeleton-base;
    }
}

img { 
    opacity: 1; 
    filter: grayscale(0%);
}

img[data-src] { 
    opacity: 0; 
    filter: grayscale(100%);
}

@media screen and (prefers-reduced-motion: no-preference) { 

    // IMPORTANT - All code for animated elements must be in this media query

    .skeleton:not(.row), *[skeleton]:not(.row){
        &:empty, &:has(img[data-src]), *:not(br):empty, *:not(hr):empty, *:not(input):empty, *:not(img):empty{
            animation: loading 1.5s infinite;
        }
    }

    .row[skeleton] > *, .skeleton.row .col > *{
        &:empty{
            animation: loading 1.5s infinite;
        }
    }

    img { 
        transition: 
        opacity 0.3s,
        filter 0.6s; 
    }

}